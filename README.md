# ❄️ NixOS Hyprland

Это мои настройки для сборки NixOS, включая настройки окружения Hyprland. Предназначена в первую очередь на платформы с видеосистемами Intel. Хотя там есть настроки и для AMD или Nvidia, протестировать в такой связке систему у меня возможности нет.

 **⚠️ Важно! Для корректной работы скриптов конфиги необходимо оставить как есть в домашний каталог `/home/user`, чтоб конфиги для NixOS остались в скрытом каталоге `.nix`.**

За основу были взяты конфиги следующих пользователей:
- https://github.com/SolDoesTech/HyprV2 - основа окружения Hyprland, мной были доработаны элементы панели wyabar, цвета, отображение элементов для дескотопов, которые лучше подходят для русскоязычных пользователей, включая модуль погоды. Некоторые элементы выключены, вы можете более детально изучить конфиги и добаить, что вам необходимо.
- https://github.com/tonybanters/nixos-hyprland/tree/master - за основу взяты конфиги home.nix и flake.nix. Благодаря этому Home Manager работает как модуль системы и мне не нужно дробить список пакетов, требуемый в системе, что для меня очень удобно. Кто-то предпочитает дробить всё на модули, я предпочитаю хранить всё в одном месте.
- https://github.com/mahaveergurjar/Hyprlock-Dots - настроки экрана блокировки Hyprlock. Там представлены несколько вариантов оформления, я немного модифицировал один из них, но там есть и другие. Большое спасибо за труд этому человеку.
- https://github.com/kartavkun/zapret-discord-youtube - включена и адаптирована настройка пакета, zapret для более удобного перекючения файлов настроек там. Этот проект распространяется на условиях лицензии MIT.
- https://github.com/LazyVim/LazyVim - доделанный Neovim. Ничего там не менял.

На всякий случай, чтоб не мотаться на начальных этапах разбивки диска и первичной настройки системы, оставляю вам шпаргалку. Так же оставляю небольшой скрипт, чтоб было проще в конфигах после создания профиля пользователя сменить имена в конфигах, где нужно. Для разметки используется утилита `Disko`. В моем случае это будет файловая система `BTRFS` без swap-радела, но вы можете модифицировать этот конфиг. Так же предусмотрена настройка параметров монтирования корневого каталога и каталога `/home/user`, остальные настройки окружения и прочих программ будут лежать в привычном пути `~/.config`.

**⚠️ Важно! Пользовательские сторонние шрифты будут по умолчанию считываться с каталога `~/.local/share/fonts`. Поэтому, если будете создавать свои иконочные шрифты, сохраняйте их туда.**

Что включают конфиги:
- Окружение настроено для русскоязычного пользователя, основные единицы измерения погодника и температуры панели указаны по Цельсию.
- Добавлена языковая панель, переключени идет по сочетанию `Alt+Shift`.
- Присутствует настройка для вывода окна мессенджеров на отдельные тэги, в том числе мессенджера MAX. Сохраните пакет AppImage в любое удобное место, и отредактируйте конфиг `~/.config/hypr/hyprland.conf`, Строки номер 302-303;
- Настроен вывод программ независимо от раскладки клавиатуры.
- Проведена настройка системы под игры и поддержку `Steam` и `Proton`, присутствует `gamemode` и `mangohud`. Для удобства запуска рекомендую проекты: [Lux-Wine](https://github.com/VHSgunzo/lux-wine) для любителей минимализма, и для любителей хранить игры так, чтоб было видно, где что [StartWine](https://github.com/RusNor/StartWine-Launcher). Вывод на отдельный тэг для игр уже настроен в правилах окон.
- Включены автообновление системы (каждодневные) и автоочистка - поколения системы старше 30 дней будут автоматически удаляться.
- Настроено влючение тёмной темы `Tokyonight-Dark-Moon` и светлой `Marwaita-Alt`. Иконки `Kora` и `Flat-Remix-Blue-Light` соответственно.
- Настроен автологин.

 **⚠️ Важно! Если у вас уже стоял какой-либо дистрибутив Linux удалите, либо переименуйте с домашнего каталога файлы `.profile`, `.bash_profile`, `.bashrc` для корректой настройки и запуска Home Manager.**

Перед установкой рекомендуется сохранить некоторые ваши конфиги, чтоб не потерялись, если таковые есть:
```
# обязательно
mv ~/.config/fastfetch{,.bak}
mv ~/.config/fish{,.bak}
mv ~/.config/hypr{,.bak}
mv ~/.config/hyprlock{,.bak}
mv ~/.config/kitty{,.bak}
mv ~/.config/mako{,.bak}
mv ~/.config/nvim{,.bak}
mv ~/.config/waybar{,.bak}
mv ~/.config/wofi{,.bak}

# рекомендуемо
mv ~/.local/share/nvim{,.bak}
mv ~/.local/state/nvim{,.bak}
mv ~/.cache/nvim{,.bak}
```
Склонируйте репозиторий к себе в домашний каталог.
```
https://github.com/3y6HuK/nix-hyprland.git
```
Если у вас уже стоит дистрибутив Linux перейдите в терминале в и прогоните скрипт для замены имён в конфигах
```
cd nix-hyprland.nix && ./replace-username.sh
```
Шпаргалка `install_script` поможет не потеряться при установке системы NixOS. Если вы уже поставили Nixos, команда будет выглядеть несколько иначе, так как нужно сперва достучаться до `bash`:
```
cd nix-hyprland/.nix && /etc/profiles/per-user/username/bin/bash replace-username.sh
```
Не забудьте вместо username вписать имя вашего пользователя. И после этого просто скопируйте содержимое репозитория в домашний каталог с перезаписью.
## Надесь вам понравится мой вариант настройки системы и работа в ней.
